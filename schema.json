{
  "databases": {
    "coba": {
      "type": "PostgreSQL",
      "name": "coba",
      "connectionString": "postgresql://postgres:postgres@localhost/coba?sslmode=disable",
      "auth": [
        {
          "action": "c",
          "rule": {
            "auth.user_id": {
              "$neq": null
            }
          }
        }
      ],
      "tables": {
        "store": {
          "auth": [
            {
              "action": "c",
              "rule": {
                "auth.user_id": "data.user_id",
                "auth.age": {
                  "$gte": 20
                }
              }
            },
            {
              "action": "du",
              "rule": {
                "$user_id": "auth.user_id",
                "data.user_id": "auth.user_id"
              }
            }
          ],
          "name": "store",
          "fields": {
            "id": "int",
            "user_id": {
              "type": "int",
              "ref": "users.id",
              "auth": [
                {
                  "action": "cud",
                  "rule": {}
                }
              ]
            },
            "name": "string",
            "description": "string",
            "address": "string"
          }
        },
        "users": {
          "name": "users",
          "fields": {
            "id": "int",
            "name": "string",
            "email": "string",
            "gender": "string",
            "ip_address": "string",
            "password": {
              "type": "string",
              "hide": true
            }
          }
        }
      }
    },
    "db_product": {
      "type": "MongoDB",
      "name": "db_product",
      "connectionString": "mongodb://localhost:27017/db_product",
      "tables": {
        "product": {
          "name": "product",
          "auth": [
            {
              "action": "c",
              "rule": {
                "data.store_id": "auth.store_id",
                "data.category": {
                  "$in": [
                    "ELETRONIC",
                    "TOY"
                  ]
                }
              }
            },
            {
              "action": "u",
              "rule": {
                "$store_id": "auth.store_id",
                "data.category": {
                  "$in": [
                    "ELETRONIC",
                    "TOY"
                  ]
                }
              }
            }
          ],
          "fields": {
            "id": "int",
            "store_id": {
              "type": "int",
              "ref": "store.id"
            },
            "name": "string",
            "description": "string",
            "price": "int",
            "category": "string",
            "category_id": {
              "type": "int",
              "ref": "product_category.id"
            },
            "created_at": "timestamp",
            "updated_at": "timestamp",
            "deleted_at": "timestamp"
          }
        },
        "product_category": {
          "name": "product_category",
          "fields": {
            "id": "int",
            "name": "string",
            "description": "string",
            "created_at": "timestamp",
            "updated_at": "timestamp"
          }
        }
      }
    },
    "db_order": {
      "type": "MongoDB",
      "name": "db_order",
      "connectionString": "mongodb://localhost:27017/db_order",
      "tables": {
        "order": {
          "name": "orders",
          "fields": {
            "_id": "ObjectID",
            "user_id": {
              "type": "int",
              "ref": "users.id"
            },
            "created_at": "timestamp",
            "updated_at": "timestamp",
            "items": {
              "type": "_object",
              "fields": {
                "product_id": "int",
                "quantity": "int",
                "created_at": "timestamp",
                "updated_at": "timestamp",
                "product": {
                  "type": "$product",
                  "references": [
                    "$product_id->$product.id"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "db_inventory": {
      "type": "MySQL",
      "name": "db_inventory",
      "connectionString": "root:root@tcp(127.0.0.1:3306)/db_inventory",
      "tables": {
        "inventory": {
          "name": "inventory",
          "fields": {
            "id": "int",
            "product_id": {
              "type": "int",
              "ref": "product.id"
            },
            "stock": "int",
            "updated_at": "timestamp"
          }
        }
      }
    }
  }
}